<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Mechanism Ratio Calculator - AMB Robotics Calculator</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="css/main.css">
        <link rel="stylesheet" href="css/calculators.css">
        <link rel="stylesheet" href="css/mechanism.css">
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <!-- <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script> -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <script src="js/calculators.js"></script>
        <script src="js/mechanism.js"></script>
    </head>
    <body>
        <header>
            <a href="index.html">
                <img src="img/logo.png" class="logo" alt="logo">
            </a>
            <h1>Mechanism Ratio Calculator</h1>
            <div style="flex: 1;"></div>
            <div class="header-left">
                <div class="units-buttons">
                    <button class="header-button imperial">IMPERIAL</button>
                    <button class="header-button metric">METRIC</button>
                </div>
                <button class="header-button copy-link">COPY<br>LINK</button>
            </div>
        </header>
        <main>
            <div class="page-element" id="motor">
                <!-- <h2>Motor Selection</h2>
                <div class="break"></div> -->
                <select id="motor_name">
                    <option>Custom</option>
                </select>
                <div class="break"></div>
                <div class="field">
                    <label for="motor_free_speed">Free Speed</label>
                    <input id="motor_free_speed" class="motor-update motor-prop" type="number" step="any" min="0" disabled>
                    &nbsp;rpm
                </div>
                <div class="field">
                    <label for="motor_stall_torque">Stall Torque</label>
                    <input id="motor_stall_torque" class="motor-update motor-prop" type="number" step="any" min="0" disabled>
                    <select id="motor_stall_torque-units" class="motor-update motor-prop">
                        <option value="1">Nm</option>
                        <option value="0.00706">oz-in</option>
                        <option value="1.35582">ft-lbs</option>
                    </select>
                </div>
                <div class="field">
                    <label for="motor_free_current">Free Current</label>
                    <input id="motor_free_current" class="motor-update motor-prop" type="number" step="any" min="0" disabled>
                    &nbsp;Amps
                </div>
                <div class="field">
                    <label for="motor_stall_current">Stall Current</label>
                    <input id="motor_stall_current" class="motor-update motor-prop" type="number" step="any" min="0" disabled>
                    &nbsp;Amps
                </div>
                <div class="field">
                    <label for="num_motors">Number of Motors</label>
                    <input id="num_motors" class="motor-update" type="number" min="1" step="1" value="1">
                </div>
                <div class="field">
                    <label for="">Provided Voltage</label>
                    <input id="applied_voltage" class="motor-update" type="number" step="any" min="0" value="12">
                    &nbsp;Volts
                </div>
            </div>
            <div class="page-element" id="load">
                <!-- <h2>Applied Load</h2>
                <div class="break"></div> -->
                <div class="field">
                    <label for="radius">Radius</label>
                    <input id="radius" type="number" step="any" min="0" value="1">
                    <select id="radius-units">
                        <option value="0.0254" class="imperial">inch</option>
                        <option value="0.001" class="metric">mm</option>
                        <option value="0.3048">foot</option>
                        <option value="1">meter</option>
                    </select>
                </div>
                <div class="field">
                    <label for="load">Load Force</label>
                    <input id="load" type="number" step="any" min="0" value="50">
                    <select id="load-units">
                        <option value="4.448" class="imperial">lbs</option>
                        <option value="9.81">kg</option>
                        <option value="1" class="metric">N</option>
                    </select>
                </div>
                <div class="field">
                    <label for="gearbox_efficiency">Efficiency</label>
                    <input id="gearbox_efficiency" type="number" step="any" min="0" max="100" value="90">
                    <span>&nbsp;%</span>
                </div>
            </div>
            <div class="page-element" id="ratio-tester">
                <h4>Ratio Tester</h4>
                <div class="field">
                    <input class="gearA" type="number" step="any" min="0">
                    <span>&nbsp;:&nbsp;</span>
                    <input class="gearB" type="number" step="any" min="0">
                </div>
                <div class="field">
                    <input class="gearA" type="number" step="any" min="0">
                    <span>&nbsp;:&nbsp;</span>
                    <input class="gearB" type="number" step="any" min="0">
                </div>
                <div class="field">
                    <input class="gearA" type="number" step="any" min="0">
                    <span>&nbsp;:&nbsp;</span>
                    <input class="gearB" type="number" step="any" min="0">
                </div>
                <div class="field">
                    <input class="gearA" type="number" step="any" min="0">
                    <span>&nbsp;:&nbsp;</span>
                    <input class="gearB" type="number" step="any" min="0">
                </div>
                <div class="field">
                    <label>Total: </label>
                    <input id="total-ratio" type="number" step="any" min="0" readonly>
                    <span>&nbsp;: 1</span>
                </div>
            </div>
            <div class="break"></div>
            <div class="page-element" id="calculation">
                <div class="inputs">
                    <div class="field">
                        <label for="gear_ratio">Gear Ratio</label>
                        <input id="gear_ratio" type="number" step="any" min="0">
                        <span>&nbsp;: 1</span>
                        <input id="gear_ratio_check" type="radio" name="driving" checked>
                    </div>
                    <div class="field">
                        <label for="rot_speed">Free Rotational Speed</label>
                        <input id="rot_speed" type="number" step="any" min="0">
                        <select id="rot_speed-units">
                            <option value="6.283">rev/s</option>
                            <option value="0.10472">rpm</option>
                            <option value="1">rad/s</option>
                        </select>
                        <input id="rot_speed_check" type="radio" name="driving">
                    </div>
                    <div class="field">
                        <label for="rot_speed_loaded">Loaded Rotational Speed</label>
                        <input id="rot_speed_loaded" type="number" step="any" min="0">
                        <select id="rot_speed_loaded-units">
                            <option value="6.283">rev/s</option>
                            <option value="0.10472">rpm</option>
                            <option value="1">rad/s</option>
                        </select>
                        <input id="rot_speed_loaded_check" type="radio" name="driving">
                    </div>
                    <div class="field">
                        <label for="lin_speed">Free Linear Speed</label>
                        <input id="lin_speed" type="number" step="any" min="0">
                        <select id="lin_speed-units">
                            <option value="0.3048" class="imperial">feet/s</option>
                            <option value="1" class="metric">m/s</option>
                            <option value="0.0254">inch/s</option>
                        </select>
                        <input id="lin_speed_check" type="radio" name="driving">
                    </div>
                    <div class="field">
                        <label for="lin_speed_loaded">Loaded Linear Speed</label>
                        <input id="lin_speed_loaded" type="number" step="any" min="0">
                        <select id="lin_speed_loaded-units">
                            <option value="0.3048" class="imperial">feet/s</option>
                            <option value="1" class="metric">m/s</option>
                            <option value="0.0254">inch/s</option>
                        </select>
                        <input id="lin_speed_loaded_check" type="radio" name="driving">
                    </div>
                    <div class="field">
                        <label for="current">Current Per Motor</label>
                        <input id="current" type="number" step="any" min="0">
                        <span>&nbsp;Amps</span>
                        <input id="current_check" type="radio" name="driving">
                    </div>
                    <div class="field">
                        <label for="stall_load">Stall Load</label>
                        <input id="stall_load" type="number" step="any" min="0">
                        <select id="stall_load-units">
                            <option value="4.448" class="imperial">lbs</option>
                            <option value="9.81">kg</option>
                            <option value="1" class="metric">N</option>
                        </select>
                        <input id="stall_load_check" type="radio" name="driving">
                    </div>
                    <div class="field">
                        <label for="stall_voltage">Stall Voltage</label>
                        <input id="stall_voltage" type="number" step="any" min="0">
                        <span>&nbsp;Volts</span>
                        <input id="stall_voltage_check" type="radio" name="driving">
                    </div>
                    <div class="field">
                        <label for="efficiency">Total Efficiency</label>
                        <input id="efficiency" type="number" step="any" readonly>
                        <span>&nbsp;%</span>
                        <!-- <input id="stall_voltage_check" type="radio" name="driving" class="hidden" disabled> -->
                    </div>
                    <div class="max-buttons">
                        <button class="max" id="max_power">
                            <a></a>
                            <input id="max_power_check" type="radio" name="driving">
                            MAX POWER
                        </button>
                        <button class="max" id="max_efficiency">
                            <input id="max_efficiency_check" type="radio" name="driving">
                            MAX EFFICIENCY
                        </button>
                        <button class="max" id="stall">
                            <input id="stall_check" type="radio" name="driving">
                            STALL
                        </button>
                    </div>
                </div>
                <div class="graph">
                    <canvas id="graph"></canvas>
                    <div class="graph-limits">
                        <input id="graph-min" type="number" step="any">
                        <label for="graph-min">min (default: max-power)</label>
                        <div style="flex: 1;"></div>
                        <label for="graph-max">(default: max-efficiency) max</label>
                        <input id="graph-max" type="number" step="any">
                    </div>
                </div>
            </div>
        </main>
        <footer>
            <span>
                Created by Ari Meles-Braverman &copy; 2022. For educational purposes only. Contact <a href="https://www.chiefdelphi.com/u/arimb/summary" style="text-decoration: underline;">@AriMB</a> on ChiefDelphi with questions or suggestions.
            </span>
        </footer>
    </body>
</html>